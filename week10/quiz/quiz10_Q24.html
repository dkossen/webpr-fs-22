<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Quiz</title>
</head>
<body>
<script>

    // Async / Await (3 Pts)

    // 1

    const idPromise   = x => new Promise( resolve => resolve(x));
    const failPromise = err => new Promise( (resolve, reject) => reject(err));

    const writer = x => {
        document.writeln(x);
        return idPromise(x);
    };

    const inc = n => idPromise(n + 1);

    const foo = async i => {
        let x = await idPromise(i);
        while (x < 4) {
            x = await writer(x);
            x = await inc(x);
        }
    };
    foo(1);

    // prints '1 2 3' --> "shows '1 2 3'": true

    /////

    // const idPromise   = x   => new Promise( resolve => resolve(x));
    // const failPromise = err => new Promise( (resolve, reject) => reject(err));
    //
    // const writer = x => {
    //     document.writeln(x);
    //     return idPromise(x);
    // };
    //
    // const inc        = n => idPromise(n + 1);
    // const filterEven = n => n % 2 === 0 ? idPromise(n): failPromise("not even") ;
    //
    // const foo = async i => {
    //     let x = await idPromise(i);
    //     while (x < 4) {
    //         x = await filterEven(x).catch( err => { /* ignore */});
    //         x = await writer(x);
    //         x = await inc(x);
    //     }
    // };
    // foo(1);

    // prints 'undefined' --> "shows '2'": false

    /////

    // 2

    // const idPromise   = x   => new Promise( resolve => resolve(x));
    // const failPromise = err => new Promise( (resolve, reject) => reject(err));
    //
    // const writer = x => {
    //     document.writeln(x);
    //     return idPromise(x);
    // };
    //
    // const inc        = n => idPromise(n + 1);
    // const filterEven = n => n % 2 === 0 ? idPromise(n): failPromise("not even") ;
    //
    // const foo = async i => {
    //     let x = await idPromise(i);
    //     while (x < 4) {
    //         x = await filterEven(x);
    //         x = await writer(x);
    //         x = await inc(x);
    //     }
    // };
    // foo(1);

    // 'Uncaught (in promise) not even' --> "shows '2'": false

    /////

    // const idPromise   = x   => new Promise( resolve => resolve(x));
    // const failPromise = err => new Promise( (resolve, reject) => reject(err));
    //
    // const writer = x => {
    //     document.writeln(x);
    //     return idPromise(x);
    // };
    // const foo = async i => {
    //     let x = await idPromise(i);
    //     x.then(writer);
    // };
    // foo(1);

    // 'Uncaught (in promise) TypeError: x.then is not a function' --> "shows '1'": false

    /////

    // 3

    const idPromise   = x   => new Promise( resolve => resolve(x));
    const failPromise = err => new Promise( (resolve, reject) => reject(err));

    const writer = x => {
        document.writeln(x);
        return idPromise(x);
    };

    const foo = async i => {
        let x = await idPromise(i);
        x     = await writer(x);
    };
    foo(1);

    // prints '1' --> "shows '1'": true

    /////

    const idPromise   = x   => new Promise( resolve => resolve(x));
    const failPromise = err => new Promise( (resolve, reject) => reject(err));

    const foo = async i => {
        let x = await idPromise(i);
        document.writeln(x);
    };
    foo(1);

    // prints '1' --> "shows '1'": true


</script>
</body>
</html>